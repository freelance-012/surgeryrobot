<html><head><title>全文文本(Fulltext)</title><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><style>div.fullText table {width: 100%;text-indent: 1px;} 
 div.fullText table td.header {font-weight: bold;text-align: center;font-family: '宋体';font-size: 16px;line-height:20px;color: #000000;padding: 5px;}div.fullText table td.content {padding: 1px;text-align: left;vertical-align: top;width: 100%;font-family: '宋体';font-size: 14px;line-height:20px;color: #000000;}</style></head><body><?xml version="1.0" encoding="UTF-8"?><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" xmlns:tbl="http://oasis-open.org/specs/soextblx" class="fullText"><table><tr><td id="claim_title" class="header">权利要求书</td></tr><tr><td class="content" id="claim_1"><business:ClaimText>1.用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，包括CT扫描机(1)，其特征在于：所述CT扫描机(1)电性输出连接数据读取模块(2)，所述数据读取模块(2)电性输出连接中央处理器(3)，所述中央处理器(3)分别电性输入连接电磁定位模块(4)与路径规划模块(5)，所述路径规划模块(5)电性输入连接选择模块(6)，所述中央处理器(3)分别电性输出连接图像处理模块(7)、控制模块(8)与显示模块(9)，所述控制模块(8)电性输出连接穿刺机器人(10)。</business:ClaimText></td></tr><tr><td class="content" id="claim_2"><business:ClaimText>2.根据权利要求1所述的用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，其特征在于：所述选择模块(6)包括触摸模块(61)，所述触摸模块(61)电性输出连接信息识别模块(62)，所述信息识别模块(62)电性输出连接确认模块(63)。</business:ClaimText></td></tr><tr><td class="content" id="claim_3"><business:ClaimText>3.根据权利要求1所述的用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，其特征在于：所述控制模块(8)包括信息接收模块(81)，所述信息接收模块(81)电性输出连接识别模块(82)，所述识别模块(82)电性输出连接指令下达模块(83)。</business:ClaimText></td></tr><tr><td class="content" id="claim_4"><business:ClaimText>4.根据权利要求1所述的用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，其特征在于：所述显示模块(9)为LED显示屏，且显示模块(9)包括图像显示单元和文字显示单元。</business:ClaimText></td></tr></table></div><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" xmlns:tbl="http://oasis-open.org/specs/soextblx" class="fullText"><table style="table-layout:fixed"><tr><td id="description_title" class="header">
						说明书
					</td></tr><tr><td class="content" id="description_invention_title">用于穿刺手术机器人CT舱内三维影像重建和定位分析系统</td></tr><tr><td class="content" id="description_1">技术领域</td></tr><tr><td class="content" id="description_2">本发明涉及CT引导经皮肺穿刺活检术技术领域，具体为用于穿刺手术机器人CT舱内三维影像重建和定位分析系统。</td></tr><tr><td class="content" id="description_3">背景技术</td></tr><tr><td class="content" id="description_4">CT引导经皮肺穿刺活检术是在CT图像的基础上利用追踪技术进行定位，完成患者注册，手术过程中可为医生展示实时穿刺引导信息，模拟针尖位置，并引导医生按照规划路径进行穿刺，近年来，基于电磁导航和光学定位的手术导航系统已被应用于经皮肺穿刺活检术中，光学定位系统的特点是利用双目视觉测距原理，运用2个或多个摄像机观测目标点，并对相同目标点的2幅以上的图像进行计算，从而获得被测物的位置，光学定位系统是目前市场上定位精度较高的定位系统，但其对操作环境要求高，标定过程复杂而且价格高昂，为此，我们用于穿刺手术机器人CT舱内三维影像重建和定位分析系统。</td></tr><tr><td class="content" id="description_5">发明内容</td></tr><tr><td class="content" id="description_6">本发明的目的在于提供用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，以解决上述背景技术中提出的问题。</td></tr><tr><td class="content" id="description_7">为实现上述目的，本发明提供如下技术方案：用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，包括CT扫描机，所述CT扫描机电性输出连接数据读取模块，所述数据读取模块电性输出连接中央处理器，所述中央处理器分别电性输入连接电磁定位模块与路径规划模块，所述路径规划模块电性输入连接选择模块，所述中央处理器分别电性输出连接图像处理模块、控制模块与显示模块，所述控制模块电性输出连接穿刺机器人。</td></tr><tr><td class="content" id="description_8">优选的，所述选择模块包括触摸模块，所述触摸模块电性输出连接信息识别模块，所述信息识别模块电性输出连接确认模块。</td></tr><tr><td class="content" id="description_9">优选的，所述控制模块包括信息接收模块，所述信息接收模块电性输出连接识别模块，所述识别模块电性输出连接指令下达模块。</td></tr><tr><td class="content" id="description_10">优选的，所述显示模块为LED显示屏，且显示模块包括图像显示单元和文字显示单元。</td></tr><tr><td class="content" id="description_11">与现有技术相比，本发明的有益效果是：本系统中在硬件上不再将标记点置于患者体表，改为同时将六个标记点固定于CT检查床上，并且算法上应用改进的D－H逆向运动算法，实现了CT图像引导机器人进行经皮肺穿刺操作，定位机制可较好地保证穿刺精度，尤其可有效保证一次性穿刺成功率，且系统具有较高的鲁棒性。</td></tr><tr><td class="content" id="description_12">附图说明</td></tr><tr><td class="content" id="description_13">图1为本发明原理图；</td></tr><tr><td class="content" id="description_14">图2为本发明选择模块原理框图；</td></tr><tr><td class="content" id="description_15">图3为本发明控制模块原理框图；</td></tr><tr><td class="content" id="description_16">图4为穿刺机器人机构及坐标系建立示意图；</td></tr><tr><td class="content" id="description_17">图5为穿刺进针点P1和P2的图像层面示意图；</td></tr><tr><td class="content" id="description_18">图6为出现某一标记点的图像层面示意图；</td></tr><tr><td class="content" id="description_19">图7为标记点与P1，P2的相对空间位置示意图；</td></tr><tr><td class="content" id="description_20">图8为空间物体表示法示意图；</td></tr><tr><td class="content" id="description_21">图9为算法过程示意图。</td></tr><tr><td class="content" id="description_22">图中：1、CT扫描机；2、数据读取模块；3、中央处理器；4、电磁定位模块；5、路径规划模块；6、选择模块；61、触摸模块；62、信息识别模块；63、确认模块；7、图像处理模块；8、控制模块；81、信息接收模块；82、识别模块；83、指令下达模块；9、显示模块；10、穿刺机器人。</td></tr><tr><td class="content" id="description_23">具体实施方式</td></tr><tr><td class="content" id="description_24">下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。</td></tr><tr><td class="content" id="description_25">本发明提供一种技术方案：用于穿刺手术机器人CT舱内三维影像重建和定位分析系统，请参阅图1，包括CT扫描机1，通过CT扫描机1进行扫描；</td></tr><tr><td class="content" id="description_26">请参阅图1，CT扫描机1电性输出连接数据读取模块2，数据读取模块2对数据图像进行读取，然后传输到中央处理器3中进行处理，数据读取模块2电性输出连接中央处理器3，中央处理器3分别电性输入连接电磁定位模块4与路径规划模块5，电磁定位模块4是为电磁定位系统，用来探测六个标记点的实际物理空间位置信息，并对位置信息初始化，路径规划模块是路径规划系统允许医生依据临床经验，选择一条最佳穿刺路径，医生可在系统中标注穿刺点，通过计算得出实际空间位置信息，并将此信息换算成穿刺机器人所需的全部关节姿态参数，以引导机器人完成穿刺操作；</td></tr><tr><td class="content" id="description_27">请参阅图1，路径规划模块5电性输入连接选择模块6，中央处理器3分别电性输出连接图像处理模块7、控制模块8与显示模块9，图像处理模块7为图像处理系统，主要功能是对CT图像中的肿瘤及标记点进行识别，以实现图像融合，获得虚拟空间位置信息，显示模块9用于显示信息的，控制模块8电性输出连接穿刺机器人10，穿刺机器人10的主要任务是完成移动穿刺针调整进针姿态、实施穿剌等一系列操作，该机器人由两个转动关节和一个垂直移动关节组成，移动关节末端是用于取活检的穿刺针，穿刺机器人的物理坐标系如图4所示；</td></tr><tr><td class="content" id="description_28">定位标记的方法在CT机检查床上安装六个性质相同的标记点，标记点以金属和聚四氟乙烯圆片制成，聚四氟乙烯圆片的直径为20mm，圆片核心点 A为金属磁极，金属磁极的直径为2mm(CT图像中所显影的部分即为核心点A)，六个外观相同的标记点分布于病人卧位时胸部扫描范围内的检查床表面或边缘，使其能够在CT图像中显示，当检查床处于适合检查的高度时，保持高度不变，水平退出检查床到达进行穿刺手术的最佳水平床位，并记录CT机中显示的水平床位数值R，电磁定位系统探测到此时6个标记点的实际物理空间位置信息，并对每一个标记点的位置信息进行初始化，病人进行胸部CT平扫后，水平退出检查床，回到床位R，医生根据临床经验，选择最佳穿刺进针的CT图像层面(见图5)，选定进针方向上与体表的交点P1和进入病灶的中心位置点P2；</td></tr><tr><td class="content" id="description_29">图像处理系统选定出现某一标记点的图像层面(见图6)，将图4与图5两个层面中的位置点P1，P2和标记点按原图中的位置显示于同一图像层面中 (见图7)，直接测量就可得到在X和Y两个方向上P1，P2两点相对于标记点的实际空间距离Px和Py；Z轴方向上的距离Pz则由两幅CT图像间隔的层数与层厚的乘积求出，依据电磁定位系统对此标记点的初始化空间位置，可直接求得P1和P2的实际物理空间位置，同理，再对依次选定的其他5个标记点做类似计算；</td></tr><tr><td class="content" id="description_30">若依据六个标记点得出Px1，Py，Pz值分别为(Px1，Px2…Px 6)(Py1，Py2…Py6)(Pz1，Pz…2Pz6)，则按照式(1)可分别计算出平均值Px－，Py－和Pz－，</td></tr><tr><td class="content" id="description_31"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806085&amp;blobId=3856316339" width="492"/></td></tr><tr><td class="content" id="description_32">改进的D－H算法设计为当用D－H逆向运动算法表示穿刺机器人各个关节的参数时，各关节的相关参数如表1所列，穿刺机器人的物理坐标系及其参数如图2所示；</td></tr><tr><td class="content" id="description_33">考虑到穿刺机器人为工业化产品，本文试验时标定两个连杆a1和a2的长度分别固定为750mm和250mm，关节角θ1，θ2及偏移量d3为关节变量，本文所需求解的机器人逆向运动学参数主要是两个旋转轴的角度θ1，θ2和连杆垂直行进距离d3；</td></tr><tr><td class="content" id="description_34">(1)计算θ1和θ2，</td></tr><tr><td class="content" id="description_35">用i－1Ki来描述第i个连杆相对于第i－1连杆的位姿，对于该3个自由度的机器人，其末端穿刺针为连杆3的坐标系，则它与基坐标系的关系为：</td></tr><tr><td class="content" id="description_36"><base:Sup>0</base:Sup>K<base:Sub>3</base:Sub>＝<base:Sup>0</base:Sup>T<base:Sub>1</base:Sub><base:Sup>1</base:Sup>T<base:Sub>2</base:Sub><base:Sup>2</base:Sup>T<base:Sub>3</base:Sub>       (2)</td></tr><tr><td class="content" id="description_37">由图6(x，y，z，是全面参考坐标系，n，o，a是运动坐标)空间物体表示法可知：</td></tr><tr><td class="content" id="description_38"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806113&amp;blobId=3856316354" width="492"/></td></tr><tr><td class="content" id="description_39">如图2物理坐标系中：</td></tr><tr><td class="content" id="description_40"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806099&amp;blobId=3856316351" width="492"/></td></tr><tr><td class="content" id="description_41"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806069&amp;blobId=3856316330" width="492"/></td></tr><tr><td class="content" id="description_42"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806093&amp;blobId=3856316345" width="492"/></td></tr><tr><td class="content" id="description_43">以<img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806060&amp;blobId=3856316326" width="103"/>左乘<base:Sup>0</base:Sup>K<base:Sub>3</base:Sub>，得：</td></tr><tr><td class="content" id="description_44"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806127&amp;blobId=3856316360" width="492"/></td></tr><tr><td class="content" id="description_45">即：</td></tr><tr><td class="content" id="description_46"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806121&amp;blobId=3856316356" width="492"/></td></tr><tr><td class="content" id="description_47">由式(8)中对应元素相等，可得：</td></tr><tr><td class="content" id="description_48"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806053&amp;blobId=3856316324" width="492"/></td></tr><tr><td class="content" id="description_49">进一步，由公式(9)可求得：</td></tr><tr><td class="content" id="description_50"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806078&amp;blobId=3856316336" width="492"/></td></tr><tr><td class="content" id="description_51">即：</td></tr><tr><td class="content" id="description_52"><img src="/sipopublicsearch/servlet/rm/DownLoadServlet?rid=4687806105&amp;blobId=3856316352" width="492"/></td></tr><tr><td class="content" id="description_53">(2)计算关节变量d3</td></tr><tr><td class="content" id="description_54">由式(8)矩阵中的第3行第4个元素相等，即可得出：</td></tr><tr><td class="content" id="description_55">d<base:Sub>3</base:Sub>＝-p<base:Sub>z</base:Sub>                (12)</td></tr><tr><td class="content" id="description_56">(3)算法过程</td></tr><tr><td class="content" id="description_57">首先，医生通过CT图像，使用路径规划系统标定进针方向上与体表的交点P1，然后，分别依据6个不同的标记点计算出Px，Py，Pz值(Px 1，Px2…Px6)(Py1，Py2…Py6)(Pz1，Pz2…Pz6)，并按照式(1)计算平均值Px－，Py－和Pz－，其次，将Px－，Py －代入式(11)和式(10)计算得出θ1和θ2，将Pz－代入式(12) 计算得出d3，最后，参照表1即可得到机器人运动的全部姿态参数，借此引导穿刺针到达标定点P1；</td></tr><tr><td class="content" id="description_58">同理，穿刺针到达P1点后，再次按照上述过程引导穿刺针到达病灶中心位置点P2，至此完成穿刺操作，算法过程如图9所示；</td></tr><tr><td class="content" id="description_59">请参阅图2，选择模块6包括触摸模块61，医生通过触摸模块61对信息进行选取，识别模块62识别信息后，医生通过确认模块63对选取的信息进行确认，触摸模块61电性输出连接信息识别模块62，信息识别模块62电性输出连接确认模块63；</td></tr><tr><td class="content" id="description_60">请参阅图3，控制模块8包括信息接收模块81，信息接收模块81电性输出连接识别模块82，识别模块82电性输出连接指令下达模块83，信息接收模块 81接收到信息，由识别模块82对信息进行识别，然后通过指令下达模块83下达指令，使穿刺机器人10工作；</td></tr><tr><td class="content" id="description_61">请参阅图1，显示模块9为LED显示屏，且显示模块9包括图像显示单元和文字显示单元，增加显示模块9显示信息的多样性，增加信息显示的效果。</td></tr><tr><td class="content" id="description_62">工作原理：当患者进行一次完整胸部CT扫描后，医生将CT图像传送到机器人来辅助肺穿刺系统的计算机控制台，数据读取系统读取CT图像并进行处理，自动检测出出现标记点的图像层面，电磁定位系统探测六个标记点的实际物理空间位置信息，并对位置信息初始化，医生依据临床经验，选择CT图像中的最佳穿刺进针层面，标定进针方向上与体表的交点P1和进针到病灶中心的位置点P2，以此规划穿刺路径，图像处理系统依据CT图像测算出进针点P1，P2相对于某一个标记点在X，Y，Z三个方向上的物理空间距离，由此获得P1，P2相对于这个标记点的物理空间位置信息，逐次选定每个标记点做计算并取平均值，最后，轨迹规划系统应用改进的D－H逆向运动算法，以穿刺针末端位置信息Px，Py，Pz获得机器人对应于这个位置的全部关节参数，驱动关节上的电机，完成对患者的肺穿刺过程。</td></tr><tr><td class="content" id="description_63">尽管已经示出和描述了本发明的实施例，对于本领域的普通技术人员而言，可以理解在不脱离本发明的原理和精神的情况下可以对这些实施例进行多种变化、修改、替换和变型，本发明的范围由所附权利要求及其等同物限定。</td></tr></table></div></body></html>