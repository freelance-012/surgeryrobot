<html><head><title>全文文本(Fulltext)</title><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><style>div.fullText table {width: 100%;text-indent: 1px;} 
 div.fullText table td.header {font-weight: bold;text-align: center;font-family: '宋体';font-size: 16px;line-height:20px;color: #000000;padding: 5px;}div.fullText table td.content {padding: 1px;text-align: left;vertical-align: top;width: 100%;font-family: '宋体';font-size: 14px;line-height:20px;color: #000000;}</style></head><body><?xml version="1.0" encoding="UTF-8"?><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" xmlns:tbl="http://oasis-open.org/specs/soextblx" class="fullText"><table><tr><td id="claim_title" class="header">权利要求书</td></tr><tr><td class="content" id="claim_1"><business:ClaimText>1.一种基于MR的手术导航系统，其特征在于，所述系统包括：探针单元、摄像单元、MR投影单元、及处理单元；</business:ClaimText></td></tr><tr><td class="content" id="claim_2"><business:ClaimText>所述探针单元包括多个带有标记物的探针，通过布置于患者病灶处多个关键点位置以形成标记；</business:ClaimText></td></tr><tr><td class="content" id="claim_3"><business:ClaimText>所述摄像单元包含标记物检测单元，用于检测各探针的标记物以形成对应患者病灶处多个关键点位置的坐标原点数据集；</business:ClaimText></td></tr><tr><td class="content" id="claim_4"><business:ClaimText>所述处理单元与所述摄像单元通信连接，用于获取所述坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型，以使患者病灶处对应的所述三维影像信息与患者病灶处对应的现实世界坐标建立关联关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_5"><business:ClaimText>所述处理单元与所述MR投影单元通信连接，用于获取所述MR投影单元的物理坐标信息，以令所述三维影像坐标模型与所述物理坐标信息转换至同一世界坐标系中，以使所述三维影像坐标模型与所述MR投影单元建立关联关系；以及用于获取所述MR投影单元对应的预设的人眼标定信息，以令所述三维影像坐标模型转换至所述MR投影单元对应的视角坐标系下，以供显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</business:ClaimText></td></tr><tr><td class="content" id="claim_6"><business:ClaimText>2.根据权利要求1所述的基于MR的手术导航系统，其特征在于，所述标记物为红外光感应物；所述标记物检测单元为红外光发射接收组件。</business:ClaimText></td></tr><tr><td class="content" id="claim_7"><business:ClaimText>3.根据权利要求1所述的基于MR的手术导航系统，其特征在于，所述MR投影单元包括：光学透镜式显示器；所述光学透镜式显示器为半透半反式透镜。</business:ClaimText></td></tr><tr><td class="content" id="claim_8"><business:ClaimText>4.根据权利要求1所述的基于MR的手术导航系统，其特征在于，所述通信连接的通信方式包括：WIFI、NFC、蓝牙、以太网、GSM、4G、及GPRS中任意一种或多种组合。</business:ClaimText></td></tr><tr><td class="content" id="claim_9"><business:ClaimText>5.根据权利要求1所述的基于MR的手术导航系统，其特征在于，所述对应患者病灶处的三维影像信息是通过X光、CT、MRI、及超声中任意一种或多种组合进行的预先获取的。</business:ClaimText></td></tr><tr><td class="content" id="claim_10"><business:ClaimText>6.一种基于MR的手术导航设备，其特征在于，所述设备包括：存储器、处理器、及通信器；所述存储器，其上存储有计算机程序；所述处理器，用于执行所述存储器存储的计算机程序，该程序被执行时实现如权利要求1至5中任意一项所述的基于MR投影的手术导航系统；所述通信器通信连接外部设备。</business:ClaimText></td></tr><tr><td class="content" id="claim_11"><business:ClaimText>7.一种可穿戴MR投影设备，其特征在于，包括：如权利要求6所述的基于MR投影的手术导航设备、及光学透镜式显示器。</business:ClaimText></td></tr><tr><td class="content" id="claim_12"><business:ClaimText>8.根据权利要求7所述的可穿戴MR投影设备，其特征在于，所述可穿戴MR投影设备为MR投影头盔或MR投影眼镜。</business:ClaimText></td></tr><tr><td class="content" id="claim_13"><business:ClaimText>9.一种基于MR的手术导航方法，其特征在于，所述方法包括：</business:ClaimText></td></tr><tr><td class="content" id="claim_14"><business:ClaimText>获取对应患者病灶处多个关键点位置的坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型，以使患者病灶处对应的所述三维影像信息与患者病灶处对应的现实世界坐标建立关联关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_15"><business:ClaimText>获取投影设备的物理坐标信息，以令所述三维影像坐标模型与所述物理坐标信息转换至同一世界坐标系中，以使所述三维影像坐标模型与所述投影设备建立关联关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_16"><business:ClaimText>获取所述投影设备对应的预设的人眼标定信息，以令所述三维影像坐标模型转换至所述投影设备对应的视角坐标系下，以供显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</business:ClaimText></td></tr><tr><td class="content" id="claim_17"><business:ClaimText>10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如权利要求1-5中任意一项所述的基于MR的手术导航系统。</business:ClaimText></td></tr></table></div><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" xmlns:tbl="http://oasis-open.org/specs/soextblx" class="fullText"><table style="table-layout:fixed"><tr><td id="description_title" class="header">
						说明书
					</td></tr><tr><td class="content" id="description_invention_title">基于MR的手术导航系统及其设备、方法和存储介质</td></tr><tr><td class="content" id="description_1">技术领域</td></tr><tr><td class="content" id="description_2">本发明涉及一种虚拟现实成像技术领域，特别是涉及一种基于MR的手术导航系统及其设备、方法和存储介质。</td></tr><tr><td class="content" id="description_3">背景技术</td></tr><tr><td class="content" id="description_4">现有的外科手术计算机辅助导航系统是一种三维定位的手术支持系统，为外科医生进行手术规划提供相对客观、准确的手段，能够根据实际手术的需要，进行手术定位，在计算机显示器上对手术工具周围的组织作相应的显示，从而对手术进行实时的导航。但是，导航探针在患者身上的定位和位置信息在计算机显示器上的平面显示带来的不直观、非原位的缺点，以及限制了导航手术的精度，延长了导航手术的时间，增加了导航使用的难度。</td></tr><tr><td class="content" id="description_5">混合现实投影技术(MR)可将半透明的三维模型投射于空间的任意位置，其不遮挡其他物体、可从任意角度观看的优势使其具备医学应用的广阔前景，目前使用混合现实投影展示疾病模型、进行手术设计和辅助术中操作已逐渐开展。但是，现有混合现实投影的应用缺少与患者之间准确的位置关系对应，因此，其无法有效配准成为制约其在术中发挥重要作用的主要因素。</td></tr><tr><td class="content" id="description_6">发明内容</td></tr><tr><td class="content" id="description_7">鉴于以上所述现有技术的缺点，本发明要解决的技术问题在于提供一种基于MR的手术导航系统及其设备、方法和存储介质，用于解决现有技术中虚拟影像数据与患者之间无法有效配准的问题。</td></tr><tr><td class="content" id="description_8">为实现上述目的及其他相关目的，本发明提供一种基于MR的手术导航系统，所述系统包括：探针单元、摄像单元、MR投影单元、及处理单元；所述探针单元包括多个带有标记物的探针，通过布置于患者病灶处多个关键点位置以形成标记；所述摄像单元包含标记物检测单元，用于检测各探针的标记物以形成对应患者病灶处多个关键点位置的坐标原点数据集；所述处理单元与所述摄像单元通信连接，用于获取所述坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型，以使患者病灶处对应的所述三维影像信息与患者病灶处对应的现实世界坐标建立关联关系；所述处理单元与所述MR投影单元通信连接，用于获取所述MR投影单元的物理坐标信息，以令所述三维影像坐标模型与所述物理坐标信息转换至同一世界坐标系中，以使所述三维影像坐标模型与所述MR投影单元建立关联关系；以及用于获取所述MR投影单元对应的预设的人眼标定信息，以令所述三维影像坐标模型转换至所述MR投影单元对应的视角坐标系下，以供显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</td></tr><tr><td class="content" id="description_9">于本发明的一实施例中，所述标记物为红外光感应物；所述标记物检测单元为红外光发射接收组件。</td></tr><tr><td class="content" id="description_10">于本发明的一实施例中，所述MR投影单元包括：光学透镜式显示器；所述光学透镜式显示器为半透半反式透镜。</td></tr><tr><td class="content" id="description_11">于本发明的一实施例中，所述通信连接的通信方式包括：WIFI、NFC、蓝牙、以太网、GSM、4G、及GPRS中任意一种或多种组合。</td></tr><tr><td class="content" id="description_12">于本发明的一实施例中，所述对应患者病灶处的三维影像信息是通过X光、CT、MRI、及超声中任意一种或多种组合进行的预先获取的。</td></tr><tr><td class="content" id="description_13">为实现上述目的及其他相关目的，本发明提供一种基于MR的手术导航设备，所述设备包括：存储器、处理器、及通信器；所述存储器，其上存储有计算机程序；所述处理器，用于执行所述存储器存储的计算机程序，该程序被执行时实现如上所述的基于MR投影的手术导航系统；所述通信器通信连接外部设备。</td></tr><tr><td class="content" id="description_14">为实现上述目的及其他相关目的，本发明提供一种可穿戴MR投影设备，包括：如上所述的基于MR投影的手术导航设备、及光学透镜式显示器。</td></tr><tr><td class="content" id="description_15">于本发明的一实施例中，所述可穿戴MR投影设备为MR投影头盔或MR投影眼镜。</td></tr><tr><td class="content" id="description_16">为实现上述目的及其他相关目的，本发明提供一种基于MR的手术导航方法，所述方法包括：获取对应患者病灶处多个关键点位置的坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型，以使患者病灶处对应的所述三维影像信息与患者病灶处对应的现实世界坐标建立关联关系；获取投影设备的物理坐标信息，以令所述三维影像坐标模型与所述物理坐标信息转换至同一世界坐标系中，以使所述三维影像坐标模型与所述投影设备建立关联关系；获取所述投影设备对应的预设的人眼标定信息，以令所述三维影像坐标模型转换至所述投影设备对应的视角坐标系下，以供显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</td></tr><tr><td class="content" id="description_17">为实现上述目的及其他相关目的，本发明提供一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如上所述的基于MR的手术导航系统。</td></tr><tr><td class="content" id="description_18">如上所述，本发明提供的一种基于MR的手术导航系统及其设备、方法和存储介质。通过探针单元、摄像单元获取对应病灶处的坐标原点数据集，以得到三维影像坐标模型，再获取MR投影单元对应的物理坐标信息、及人眼标定信息，使所述MR投影单元显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。达到了以下有益效果：</td></tr><tr><td class="content" id="description_19">本发明能够在手术过程中实时在术区本身显示病灶位置、手术规划等，使术者视线和关注区域集中于术区，避免了在术区和导航计算机显示器上的反复切换，有效提高操作的可靠性和导航的精确性，避免了传统导航手术中术者反复将手术工具频繁更换为导航探针的繁琐步骤，提高了手术的连贯性，缩短了操作时间。</td></tr><tr><td class="content" id="description_20">附图说明</td></tr><tr><td class="content" id="description_21">图1为本发明实施例中的一种基于MR投影的手术导航系统的场景示意图。</td></tr><tr><td class="content" id="description_22">图2为本发明实施例中的一种基于MR投影的手术导航系统的模块示意图。</td></tr><tr><td class="content" id="description_23">图3为本发明实施例中的一种基于MR投影的导航设备的结构示意图。</td></tr><tr><td class="content" id="description_24">图4A为本发明实施例中的一种可穿戴MR投影设备为MR投影头盔的结构示意图。</td></tr><tr><td class="content" id="description_25">图4B为本发明实施例中的一种可穿戴MR投影设备为MR投影眼镜的结构示意图。</td></tr><tr><td class="content" id="description_26">图5为本发明实施例中的一种基于MR投影的手术导航方法的流程示意图。</td></tr><tr><td class="content" id="description_27">具体实施方式</td></tr><tr><td class="content" id="description_28">以下通过特定的具体实例说明本发明的实施方式，本领域技术人员可由本说明书所揭露的内容轻易地了解本发明的其他优点与功效。本发明还可以通过另外不同的具体实施方式加以实施或应用，本说明书中的各项细节也可以基于不同观点与应用，在没有背离本发明的精神下进行各种修饰或改变。需说明的是，在不冲突的情况下，以下实施例及实施例中的特征可以相互组合。</td></tr><tr><td class="content" id="description_29">需要说明的是，以下实施例中所提供的图示仅以示意方式说明本发明的基本构想，遂图式中仅显示与本发明中有关的组件而非按照实际实施时的组件数目、形状及尺寸绘制，其实际实施时各组件的型态、数量及比例可为一种随意的改变，且其组件布局型态也可能更为复杂。</td></tr><tr><td class="content" id="description_30">为便于理解本发明所提供的一种基于MR的手术导航系统及其设备、方法和存储介质，下面通过该系统在场景中的示意图予以展示。</td></tr><tr><td class="content" id="description_31">如图1所示，展示本发明实施例中的一种基于MR投影的手术导航系统的场景示意图。如图所示场景中，所述系统100包括：探针单元101、摄像单元102、MR投影单元103、及处理单元104。</td></tr><tr><td class="content" id="description_32">简单来说，可通过探针单元101与摄像单元102的配合，获取针对患者病灶处，如胸腔、腹部、头部、四肢等的位置的坐标原点数据集。具体为，通过将探针单元101中多个带有红外光感应物的探针布置于患者病灶处多个关键点位置，以作为标记，再通过摄像单元102所包含的标记物检测单元，利用发送红外光，再接收到感应了各探针上红外光感应物的信息，以获得对应各探针的坐标数据，形成坐标原点数据集。</td></tr><tr><td class="content" id="description_33">处理单元104通过获取所述坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型以构建出三维影像坐标模型。其中，三维影像信息是通过X光、CT、MRI、及超声中任意一种或多种组合进行的预先获取的。</td></tr><tr><td class="content" id="description_34">接下来，处理单元104通过获取MR投影单元103的物理坐标信息、及对应的预设的人眼标定信息。借助物理坐标信息，与所述三维影像坐标模型转换至同一世界坐标系中，使所述三维影像坐标模型与所述MR投影单元103建立关联关系。再借助对应的预设的人眼标定信息(即对应MR投影单元103视角坐标系)，使所述三维影像坐标模型转换至所述MR投影单元103对应的视角坐标系下，即可实现将三维影像信息显示于通过所述MR投影单元103看到的现实场景中，并且与现实场景中患者病灶处实时配准，实现医用场景中虚拟与现实的高度融合</td></tr><tr><td class="content" id="description_35">举例来说，通过预先测得使用者(医生)的人眼标定信息，可使患者病灶处的三维影像信息显示于MR投影单元103的眼镜或面罩上(具体为光学透镜式显示器)，如使用者(医生)透过眼镜或面罩看到的“虚拟的肺部”会叠加在透过眼镜或面罩看到的“真实的肺部”，犹如“透视”一样，使得需要在电脑显示器才能看到的三维影像数据，直接呈现在眼镜或面罩前，并且对应于现实场景。</td></tr><tr><td class="content" id="description_36">并且当使用者(医生)转动头部时，因三维影像坐标模型与所述MR投影单元103建立关联关系，所以“虚拟的肺部”还是于“真实的肺部”准确的匹配，不随者(医生)转动头部的转动而转动。</td></tr><tr><td class="content" id="description_37">反而，当患者移动挪动身体，“虚拟的肺部”会随着“真实的肺部”的位移而相应位移，并且保持准确的匹配。</td></tr><tr><td class="content" id="description_38">如图2所示，展示本发明实施例中的一种基于MR投影的手术导航系统的模块示意图。如图所示，所述系统200包括：探针单元201、摄像单元202、MR投影单元203、及处理单元204。</td></tr><tr><td class="content" id="description_39">于本发明的一实施例中，所述探针单元201包括多个带有标记物的探针，通过布置于患者病灶处多个关键点位置以形成标记。</td></tr><tr><td class="content" id="description_40">于本发明的一实施例中，所述标记物为红外光感应物，以用于被红外光检感应或检测到。</td></tr><tr><td class="content" id="description_41">于本实施例中，所述探针还可以是通过电磁定位获得数据采集功能，应用三维实体造型技术可构建探针的模型，完成实体几何模型向三维表面模型的转化及旋转。</td></tr><tr><td class="content" id="description_42">于本实施例中，所述探针还可以是对探针针尖进行注册并进行精度测试，根据针尖注册的位置与方向实时准确地跟踪探针单元201的空间位置，并通过显示器显示，以作手术导航之用。</td></tr><tr><td class="content" id="description_43">于本发明的一实施例中，所述摄像单元202包含标记物检测单元，用于检测各探针的标记物以形成对应患者病灶处多个关键点位置的坐标原点数据集。</td></tr><tr><td class="content" id="description_44">于本发明的一实施例中，所述标记物检测单元为红外光发射接收组件，通过发送红外光以感应或检测感应物，以获取位置信息。</td></tr><tr><td class="content" id="description_45">于本实施例中，所述摄像单元202与探针单元201配合使用。</td></tr><tr><td class="content" id="description_46">于本发明的一实施例中，所述对应患者病灶处的三维影像信息是通过X光、CT、MRI、及超声中任意一种或多种组合进行的预先获取的。</td></tr><tr><td class="content" id="description_47">举例来说，通过CT检测获取对应患者病灶处的多个切面的影像信息，通过融合形成三维影像信息，但是通过如上方式获取三维影像信息只能呈现于计算机显示器中，在实际手术中，需要医生在计算机显示器与现实场景中患者病灶处不断往复观看，以进行判断，应用起来相当麻烦和不准确。</td></tr><tr><td class="content" id="description_48">为此，于本发明的一实施例中，所述处理单元204与所述摄像单元202通信连接，用于获取所述坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型，以使患者病灶处对应的所述三维影像信息与患者病灶处对应的现实世界坐标建立关联关系。</td></tr><tr><td class="content" id="description_49">简单来说，通过获取现实场景中的患者病灶处坐标原点数据集，并融合至三维影像信息中，使得计算机显示器中的患者病三维影像信息有了对应现实世界的坐标，使三维影像信息与现实世界坐标建立关联关系。</td></tr><tr><td class="content" id="description_50">于本发明的一实施例中，所述处理单元204与所述MR投影单元203通信连接，用于获取所述MR投影单元203的物理坐标信息，以令所述三维影像坐标模型与所述物理坐标信息转换至同一世界坐标系中，以使所述三维影像坐标模型与所述MR投影单元203建立关联关系。</td></tr><tr><td class="content" id="description_51">于本实施例中，因为所述三维影像坐标模型包含现实世界的坐标原点数据，因此将所述MR投影单元203的物理坐标信息转换为同一世界坐标系，即可使二者共存于一个世界坐标系中，使所述三维影像坐标模型与所述MR投影单元203建立关联关系。即所述三维影像坐标模型与所述MR投影单元203的相对关系可通过三维向量矩阵进行表示。</td></tr><tr><td class="content" id="description_52">但是完成上步还无法将虚拟与现实融合，还需要将三维影像坐标模型转换至所述MR投影单元203内的视角坐标系下，以实现在所述MR投影单元203任意转动情况下，患者病灶处对应的三维影像坐标模型所包含的三维影像信息实时与现实患者病灶处配准，实现虚拟与现实融合。</td></tr><tr><td class="content" id="description_53">于本发明的一实施例中，所述处理单元204与所述MR投影单元203通信连接，还用于获取所述MR投影单元203对应的预设的人眼标定信息，以令所述三维影像坐标模型转换至所述MR投影单元203对应的视角坐标系下，以供所述MR投影单元203显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</td></tr><tr><td class="content" id="description_54">于本实施例中，令所述三维影像坐标模型转换至所述MR投影单元203对应的视角坐标系下，可以理解为，将三维影像坐标模型所遵循的坐标体系，转换成所述MR投影单元203所适用的视角坐标体系。那么当现实患者病灶处对应的三维影像坐标模型移动时，通过在两个坐标体系下的转换，使得在所述MR投影单元203的视角下发生相应的移动。</td></tr><tr><td class="content" id="description_55">于本实施例中，所述人眼标定信息类似于相机标定的内参外参，因使用者佩戴所述MR投影单元203，即使用者的视角(人眼)类似于相机视角，故需测定人眼标定信息。</td></tr><tr><td class="content" id="description_56">需说明的是，人眼标定信息因个人眼部情况不同而不一样，故，所述人眼标定信息最好是针对每个人单独进行测量。但是还可以通过预设一人眼标定信息为默认设定，当不同使用者使用时进行微调。</td></tr><tr><td class="content" id="description_57">于本实施例中，所述MR投影单元203采用现实混合技术，该技术通过在现实场景呈现虚拟场景信息，在现实世界、虚拟世界和用户之间搭起一个交互反馈的信息回路，以增强用户体验的真实感。</td></tr><tr><td class="content" id="description_58">具体来说，混合现实(MR)(既包括增强现实和增强虚拟)指的是合并现实和虚拟世界而产生的新的可视化环境。在新的可视化环境里物理和数字对象共存，并实时互动。MR区别于VR、及AR的关键点在于与现实世界进行交互和信息的及时获取。</td></tr><tr><td class="content" id="description_59">于本发明的一实施例中，所述MR投影单元203包括：光学透镜式显示器；所述光学透镜式显示器为半透半反式透镜。其透光可看到现实场景，同时其上显示三维影像信息，实现与所述三维影像信息对应的现实场景中的患者病灶处叠加并实时配准。</td></tr><tr><td class="content" id="description_60">于本发明的一实施例中，所述通信连接的通信方式包括：WIFI、NFC、蓝牙、以太网、GSM、4G、及GPRS中任意一种或多种组合。</td></tr><tr><td class="content" id="description_61">于本实施例中，所述通信方式的网络通信方式包括：互联网、内联网、广域网(WAN)、局域网(LAN)、无线网络、数字用户线(DSL)网络、帧中继网络、异步传输模式(ATM)网络、虚拟专用网络(VPN)和/或任何其它合适的通信网络中的任何一个或多个。</td></tr><tr><td class="content" id="description_62">于本实施例中，应用本发明所述的基于MR投影的手术导航系统200，其弥补了现有技术中缺少与患者之间准确的位置关系对应，在手术过程中能够实时在术区本身显示病灶位置、手术规划等，使术者视线和关注区域集中于术区，避免了在术区和导航计算机显示器上的反复切换，有效提高操作的可靠性和导航的精确性；同时，由于混合现实影可随病灶的空间位置变化而改变位置，避免了传统导航手术中术者反复将手术工具频繁更换为导航探针的繁琐步骤，提高了手术的连贯性，缩短了操作时间；此外，手术导航系统能建立患者于数字模型联系的固有功能，克服了混合现实投影无法与患者配准的难题，从而能够实现手术导航设备与混合现实投影在手术中的作用互补。</td></tr><tr><td class="content" id="description_63">于本实施例中，所述处理单元204可以是服务器，还可以是通用处理器，包括中央处理器(Central Processing Unit，简称CPU)、网络处理器(Network Processor，简称NP)等；还可以是数字信号处理器(Digital Signal Processing，简称DSP)、专用集成电路(Application Specific Integrated Circuit，简称ASIC)、现场可编程门阵列(Field－Programmable Gate Array，简称FPGA)或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。</td></tr><tr><td class="content" id="description_64">如图3所示，展示本发明实施例中的一种基于MR投影的导航设备的结构示意图。如图所示，所述设备300包括：存储器301、处理器302、及通信器303。</td></tr><tr><td class="content" id="description_65">于本发明的一实施例中，所述存储器301，其上存储有计算机程序；所述处理器302，用于执行所述存储器301存储的计算机程序，该程序被执行时实现如图2中任意一项所述的基于MR投影的手术导航系统；所述通信器303通信连接外部设备。</td></tr><tr><td class="content" id="description_66">于本实施例中，所述外部设备可包括：如图2所述的探针单元201、摄像单元202、及MR投影单元203中任意一种或多种组合。</td></tr><tr><td class="content" id="description_67">所述存储器301可能包含随机存取存储器(Random Access Memory，简称RAM)，也可能还包括非易失性存储器(non-volatile memory)，例如至少一个磁盘存储器。</td></tr><tr><td class="content" id="description_68">所述处理器302可以是通用处理器，包括中央处理器(Central Processing Unit，简称CPU)、网络处理器(Network Processor，简称NP)等；还可以是数字信号处理器(Digital Signal Processing，简称DSP)、专用集成电路(Application SpecificIntegrated Circuit，简称ASIC)、现场可编程门阵列(Field－Programmable Gate Array，简称FPGA)或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。</td></tr><tr><td class="content" id="description_69">所述通信器303用于实现数据库访问装置与其他设备(例如客户端、读写库和只读库)之间的通信连接，所述通信连接可以是一个或多个有线和/或无线网络的任何合适的组合形式。例如，通信方式为网络通信方式，包括：互联网、内联网、广域网(WAN)、局域网(LAN)、无线网络、数字用户线(DSL)网络、帧中继网络、异步传输模式(ATM)网络、虚拟专用网络(VPN)和/或任何其它合适的通信网络中的任何一个或多个。</td></tr><tr><td class="content" id="description_70">如图4A所示，展示为本发明于一实施例中可穿戴MR投影设备为MR投影头盔的结构示意图。</td></tr><tr><td class="content" id="description_71">如图4B所示，展示为本发明于另一实施例中可穿戴MR投影设备为MR投影眼镜的结构示意图。</td></tr><tr><td class="content" id="description_72">于图4A、及4B中，所述可穿戴MR投影设备400均包括：如图3所述的基于MR投影的手术导航设备401、及光学透镜式显示器402。</td></tr><tr><td class="content" id="description_73">于本发明一实施例中，所述光学透镜式显示器402为半透半反式透镜，其透光可看到现实场景，同时其上显示三维影像信息并与所述三维影像信息对应的现实场景中的患者病灶处叠加并实时配准。</td></tr><tr><td class="content" id="description_74">如图5所示，展示本发明实施例中的一种基于MR投影的导航方法的流程示意图。如图所示，所述方法包括：</td></tr><tr><td class="content" id="description_75">步骤S501：获取对应患者病灶处多个关键点位置的坐标原点数据集，并结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型，以使患者病灶处对应的所述三维影像信息与患者病灶处对应的现实世界坐标建立关联关系。</td></tr><tr><td class="content" id="description_76">步骤S502：获取投影设备的物理坐标信息，以令所述三维影像坐标模型与所述物理坐标信息转换至同一世界坐标系中，以使所述三维影像坐标模型与所述投影设备建立关联关系。</td></tr><tr><td class="content" id="description_77">步骤S503：获取所述投影设备对应的预设的人眼标定信息，以令所述三维影像坐标模型转换至所述投影设备对应的视角坐标系下，以供所述投影设备显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</td></tr><tr><td class="content" id="description_78">简单来说，可通过如图2所述的探针单元201与摄像单元202的配合，获取针对患者病灶处，如胸腔、腹部、头部、四肢等的位置的坐标原点数据集。具体为，通过将如图2所述探针单元201中多个带有红外光感应物的探针布置于患者病灶处多个关键点位置，以作为标记，再通过如图2所述的摄像单元202所包含的标记物检测单元，利用发送红外光，再接收到感应了各探针上红外光感应物的信息，以获得对应各探针的坐标数据，形成坐标原点数据集。</td></tr><tr><td class="content" id="description_79">在获取所述坐标原点数据集后，结合预先获取的对应患者病灶处的三维影像信息构建三维影像坐标模型以构建出三维影像坐标模型。其中，三维影像信息是通过X光、CT、MRI、及超声中任意一种或多种组合进行的预先获取的。</td></tr><tr><td class="content" id="description_80">接下来，通过获取投影设备的物理坐标信息、及对应的预设的人眼标定信息。借助物理坐标信息，与所述三维影像坐标模型转换至同一世界坐标系中，使所述三维影像坐标模型与投影设备建立关联关系。再借助对应的预设的人眼标定信息(即对应投影设备的视角坐标系)，使所述三维影像坐标模型转换至投影设备对应的视角坐标系下，即可实现将三维影像信息显示于通过投影设备看到的现实场景中，并且与现实场景中患者病灶处实时配准，实现医用场景中虚拟与现实的高度融合</td></tr><tr><td class="content" id="description_81">举例来说，通过预先测得使用者(医生)的人眼标定信息，可使患者病灶处的三维影像信息显示于投影设备的眼镜或面罩上(具体为光学透镜式显示器)，如使用者(医生)透过眼镜或面罩看到的“虚拟的肺部”会叠加在透过眼镜或面罩看到的“真实的肺部”，犹如“透视”一样，使得需要在电脑显示器才能看到的三维影像数据，直接呈现在眼镜或面罩前，并且对应于现实场景。</td></tr><tr><td class="content" id="description_82">并且当使用者(医生)转动头部时，因三维影像坐标模型与投影设备建立关联关系，所以“虚拟的肺部”还是于“真实的肺部”准确的匹配，不随者(医生)转动头部的转动而转动。</td></tr><tr><td class="content" id="description_83">反而，当患者移动挪动身体，“虚拟的肺部”会随着“真实的肺部”的位移而相应位移，并且保持准确的匹配。</td></tr><tr><td class="content" id="description_84">本发明能够将手术导航系统从先定位、后比对的手术操作位置验证模式，优化为先投影、后操作的手术操作位置引导模式，使医生在预知患者重要结构和病灶空间位置的前提下进行手术操作，大大降低误伤重要器官、血管、神经、肿瘤等的风险，使手术安全、彻底，范围精确、操作可靠，减少手术并发症。</td></tr><tr><td class="content" id="description_85">于本实施例中，该方法可应用于如图2中的处理单元或如图3中基于MR投影的导航设备。</td></tr><tr><td class="content" id="description_86">于本发明的一实施例中，本发明提供一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如图2所述的基于MR的手术导航系统。</td></tr><tr><td class="content" id="description_87">所述计算机可读存储介质，本领域普通技术人员可以理解：实现上述各方法实施例的全部或部分步骤可以通过计算机程序相关的硬件来完成。前述的计算机程序可以存储于一计算机可读存储介质中。该程序在执行时，执行包括上述各方法实施例的步骤；而前述的存储介质包括：ROM、RAM、磁碟或者光盘等各种可以存储程序代码的介质。</td></tr><tr><td class="content" id="description_88">综上所述，本发明提供的一种基于MR的手术导航系统及其设备、方法和存储介质。通过探针单元、摄像单元获取对应病灶处的坐标原点数据集，以得到三维影像坐标模型，再获取MR投影单元对应的物理坐标信息、及人眼标定信息，使所述MR投影单元显示与现实场景中患者病灶处叠加并实时配准的所述三维影像信息。</td></tr><tr><td class="content" id="description_89">综上所述，本发明有效克服了现有技术中的种种缺点而具高度产业利用价值。</td></tr><tr><td class="content" id="description_90">上述实施例仅例示性说明本发明的原理及其功效，而非用于限制本发明。任何熟悉此技术的人士皆可在不违背本发明的精神及范畴下，对上述实施例进行修饰或改变。因此，举凡所属技术领域中具有通常知识者在未脱离本发明所揭示的精神与技术思想下所完成的一切等效修饰或改变，仍应由本发明的权利要求所涵盖。</td></tr></table></div></body></html>