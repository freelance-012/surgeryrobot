<html><head><title>全文文本(Fulltext)</title><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><style>div.fullText table {width: 100%;text-indent: 1px;} 
 div.fullText table td.header {font-weight: bold;text-align: center;font-family: '宋体';font-size: 16px;line-height:20px;color: #000000;padding: 5px;}div.fullText table td.content {padding: 1px;text-align: left;vertical-align: top;width: 100%;font-family: '宋体';font-size: 14px;line-height:20px;color: #000000;}</style></head><body><?xml version="1.0" encoding="UTF-8"?><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" xmlns:tbl="http://oasis-open.org/specs/soextblx" class="fullText"><table><tr><td id="claim_title" class="header">权利要求书</td></tr><tr><td class="content" id="claim_1"><business:ClaimText>1.一种用于手术导航的配准系统，其特征在于，包括：处理器、固定定位装置和移动定位装置；</business:ClaimText></td></tr><tr><td class="content" id="claim_2"><business:ClaimText>所述固定定位装置用于固定于手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至所述处理器；</business:ClaimText></td></tr><tr><td class="content" id="claim_3"><business:ClaimText>所述处理器用于在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息；</business:ClaimText></td></tr><tr><td class="content" id="claim_4"><business:ClaimText>所述移动定位装置用于在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器；</business:ClaimText></td></tr><tr><td class="content" id="claim_5"><business:ClaimText>所述处理器还用于将所述三维模拟图像和所述3个定位点放置于同一坐标系中，计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面，计算所述第一平面的第一法线和所述第二平面的第二法线，移动所述第二法线以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度，以及，将所述固定点放置于所述坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。</business:ClaimText></td></tr><tr><td class="content" id="claim_6"><business:ClaimText>2.如权利要求1所述的配准系统，其特征在于，所述处理器还用于：</business:ClaimText></td></tr><tr><td class="content" id="claim_7"><business:ClaimText>构建第一坐标系，所述第一坐标系用于显示在现实环境中所述固定点和所述3个定位点之间的相对关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_8"><business:ClaimText>构建第二坐标系，所述第二坐标系用于显示在虚拟环境中所述三维模拟图像及所述3个特征点的相对关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_9"><business:ClaimText>根据所述第一坐标系和所述第二坐标系的坐标转换关系，将所述固定点和所述3个定位点转换至所述第二坐标系。</business:ClaimText></td></tr><tr><td class="content" id="claim_10"><business:ClaimText>3.如权利要求1所述的配准系统，其特征在于，所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合的情况为：所述第二平面内的所述3个定位点与所述第一平面内的对应的特征点的距离之和取最小值。</business:ClaimText></td></tr><tr><td class="content" id="claim_11"><business:ClaimText>4.如权利要求1所述的配准系统，其特征在于，所述固定定位装置包括：定位支架和第一光学动态追踪设备，所述定位支架上设有可被所述第一光学动态追踪设备实时追踪的定位球；</business:ClaimText></td></tr><tr><td class="content" id="claim_12"><business:ClaimText>所述定位支架用于固定于所述手术对象上；</business:ClaimText></td></tr><tr><td class="content" id="claim_13"><business:ClaimText>所述第一光学动态追踪设备用于通过定位球对所述定位支架的固定点进行定位，并将所述固定点的位置信息通过通信连接发送至所述处理器。</business:ClaimText></td></tr><tr><td class="content" id="claim_14"><business:ClaimText>5.如权利要求1所述的配准系统，其特征在于，所述移动定位装置包括：探针和第二光学动态追踪设备，所述探针上设有可被所述第二光学动态追踪设备实时追踪的定位球；</business:ClaimText></td></tr><tr><td class="content" id="claim_15"><business:ClaimText>所述探针用于在所述手术对象上对应于所述3个特征点选取3个定位点；</business:ClaimText></td></tr><tr><td class="content" id="claim_16"><business:ClaimText>所述第二光学动态追踪设备用于通过定位球对所述3个定位点进行定位，并将所述3个定位点的位置信息通过通信连接发送至所述处理器。</business:ClaimText></td></tr><tr><td class="content" id="claim_17"><business:ClaimText>6.一种用于手术导航的配准方法，其特征在于，利用如权利要求1所述的配准系统实现，所述配准方法包括：</business:ClaimText></td></tr><tr><td class="content" id="claim_18"><business:ClaimText>固定定位装置获取在手术对象上的固定点的位置信息，以及将所述固定点的位置信息发送至处理器；</business:ClaimText></td></tr><tr><td class="content" id="claim_19"><business:ClaimText>所述处理器在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息；</business:ClaimText></td></tr><tr><td class="content" id="claim_20"><business:ClaimText>移动定位装置在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器；</business:ClaimText></td></tr><tr><td class="content" id="claim_21"><business:ClaimText>所述处理器将所述三维模拟图像和所述3个定位点放置于同一坐标系中，计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面，计算所述第一平面的第一法线和所述第二平面的第二法线，移动所述第二法线以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度，以及，将所述固定点放置于所述坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。</business:ClaimText></td></tr><tr><td class="content" id="claim_22"><business:ClaimText>7.如权利要求6所述的配准方法，其特征在于，所述处理器将所述三维模拟图像和所述3个定位点放置于同一坐标系中，包括：</business:ClaimText></td></tr><tr><td class="content" id="claim_23"><business:ClaimText>构建第一坐标系，所述第一坐标系用于显示在现实环境中所述固定点和所述3个定位点之间的相对关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_24"><business:ClaimText>构建第二坐标系，所述第二坐标系用于显示在虚拟环境中所述三维模拟图像及所述3个特征点的相对关系；</business:ClaimText></td></tr><tr><td class="content" id="claim_25"><business:ClaimText>根据所述第一坐标系和所述第二坐标系的坐标转换关系，将所述3个定位点转换至所述第二坐标系；</business:ClaimText></td></tr><tr><td class="content" id="claim_26"><business:ClaimText>将所述固定点放置于所述坐标系中，包括：根据所述坐标转换关系将所述固定点转换至所述第二坐标系。</business:ClaimText></td></tr><tr><td class="content" id="claim_27"><business:ClaimText>8.如权利要求6所述的配准方法，其特征在于，所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合的情况为：所述第二平面内的所述3个定位点与所述第一平面内的对应的特征点的距离之和取最小值。</business:ClaimText></td></tr><tr><td class="content" id="claim_28"><business:ClaimText>9.如权利要求6所述的配准方法，其特征在于，所述移动定位装置包括：探针和第二光学动态追踪设备，所述探针上设有可被所述第二光学动态追踪设备实时追踪的定位球：</business:ClaimText></td></tr><tr><td class="content" id="claim_29"><business:ClaimText>所述移动定位装置在所述手术对象的指定区域内获取3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器，包括：</business:ClaimText></td></tr><tr><td class="content" id="claim_30"><business:ClaimText>所述探针在所述指定区域内获取3个定位点；</business:ClaimText></td></tr><tr><td class="content" id="claim_31"><business:ClaimText>所述第二光学动态追踪设备通过定位球对所述3个定位点进行定位，并将所述个定位点的位置信息通过通信连接发送至所述处理器。</business:ClaimText></td></tr></table></div><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" xmlns:tbl="http://oasis-open.org/specs/soextblx" class="fullText"><table style="table-layout:fixed"><tr><td id="description_title" class="header">
						说明书
					</td></tr><tr><td class="content" id="description_invention_title">用于手术导航的配准系统及方法</td></tr><tr><td class="content" id="description_1">技术领域</td></tr><tr><td class="content" id="description_2">本发明涉及一种用于手术导航的配准系统及方法。</td></tr><tr><td class="content" id="description_3">背景技术</td></tr><tr><td class="content" id="description_4">随着现代医疗技术的发展，各类手术的实施为提高治疗效果带来了很大的进步。但是，手术的实施往往都存在一定难度和风险，例如在骨科手术中，必须要准确地确定手术部位，否则容易造成手术失败。</td></tr><tr><td class="content" id="description_5">传统确定手术部位的方法是医生根据自身判断在可能的手术部位处插入探针，然后对插入探针的部位拍摄X线光片，再根据X线光片，观察探针插入的位置与实际手术部位的位置关系，通过多次插入探针与进行X线透视，逐步找准手术部位。但是，这种定位方式会不仅对患者造成除手术部位以外的其他创口，而且还需要患者多次拍摄X线光片，对患者以及医生的身体都会造成损害。</td></tr><tr><td class="content" id="description_6">还有一些确定手术部位的方法需要借助于手术部位的三维模拟图像和ICP(迭代最近点)算法。以骨科手术为例，首先需要将标定件固定在骨头上，拍摄骨头的三维模拟图像并在三维模拟图像上选取一片预设区域，然后在骨头的相应位置上用可定位的探针滑动，获取探针选取的点集的坐标，再利用ICP算法，将点集拟合到预设区域，并计算出相应的拟合矩阵，最后将标定件根据拟合矩阵拟合到三维模拟图像上。这种方法的缺点是，需要探针在骨头上进行滑动，由于在骨科手术中，骨头的表面会留有肌肉组织，因此不能保证探针是沿着骨头的表面进行滑动的，导致配准精度不高。</td></tr><tr><td class="content" id="description_7">发明内容</td></tr><tr><td class="content" id="description_8">本发明要解决的技术问题是为了克服现有技术中在确定手术部位时会损害患者身体且配准精度不高的缺陷，提供一种用于手术导航的配准系统及方法。</td></tr><tr><td class="content" id="description_9">本发明是通过以下技术方案解决上述技术问题的：</td></tr><tr><td class="content" id="description_10">本发明提供一种用于手术导航的配准系统，包括：处理器、固定定位装置和移动定位装置；</td></tr><tr><td class="content" id="description_11">所述固定定位装置用于固定于手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至所述处理器；</td></tr><tr><td class="content" id="description_12">所述处理器用于在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息；</td></tr><tr><td class="content" id="description_13">所述移动定位装置用于在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器；</td></tr><tr><td class="content" id="description_14">所述处理器还用于将所述三维模拟图像和所述3个定位点放置于同一坐标系中，计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面，计算所述第一平面的第一法线和所述第二平面的第二法线，移动所述第二法线以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度，以及，将所述固定点放置于所述坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。</td></tr><tr><td class="content" id="description_15">较佳地，所述处理器还用于：</td></tr><tr><td class="content" id="description_16">构建第一坐标系，所述第一坐标系用于显示在现实环境中所述固定点和所述3个定位点之间的相对关系；</td></tr><tr><td class="content" id="description_17">构建第二坐标系，所述第二坐标系用于显示在虚拟环境中所述三维模拟图像及所述3个特征点的相对关系；</td></tr><tr><td class="content" id="description_18">根据所述第一坐标系和所述第二坐标系的坐标转换关系，将所述固定点和所述3个定位点转换至所述第二坐标系。</td></tr><tr><td class="content" id="description_19">较佳地，所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合的最优情况为：所述第二平面内的所述3个定位点与所述第一平面内的对应的特征点的距离之和取最小值。</td></tr><tr><td class="content" id="description_20">较佳地，所述固定定位装置包括：定位支架和第一光学动态追踪设备，所述定位支架上设有可被所述第一光学动态追踪设备实时追踪的定位球；</td></tr><tr><td class="content" id="description_21">所述定位支架用于固定于所述手术对象上；</td></tr><tr><td class="content" id="description_22">所述第一光学动态追踪设备用于通过定位球对所述定位支架的固定点进行定位，并将所述固定点的位置信息通过通信连接发送至所述处理器。</td></tr><tr><td class="content" id="description_23">较佳地，所述移动定位装置包括：探针和第二光学动态追踪设备，所述探针上设有可被所述第二光学动态追踪设备实时追踪的定位球；</td></tr><tr><td class="content" id="description_24">所述探针用于在所述手术对象上对应于所述3个特征点选取3个定位点；</td></tr><tr><td class="content" id="description_25">所述第二光学动态追踪设备用于通过定位球对所述3个定位点进行定位，并将所述3个定位点的位置信息通过通信连接发送至所述处理器。</td></tr><tr><td class="content" id="description_26">本发明还提供一种用于手术导航的配准方法，利用如上所述的配准系统实现，所述配准方法包括：</td></tr><tr><td class="content" id="description_27">固定定位装置固定于手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至处理器；</td></tr><tr><td class="content" id="description_28">所述处理器在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息；</td></tr><tr><td class="content" id="description_29">移动定位装置在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器；</td></tr><tr><td class="content" id="description_30">所述处理器将所述三维模拟图像和所述3个定位点放置于同一坐标系中，计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面，计算所述第一平面的第一法线和所述第二平面的第二法线，移动所述第二法线以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度，以及，将所述固定点放置于所述坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。</td></tr><tr><td class="content" id="description_31">较佳地，所述处理器将所述三维模拟图像和所述3个定位点放置于同一坐标系中，包括：</td></tr><tr><td class="content" id="description_32">构建第一坐标系，所述第一坐标系用于显示在现实环境中所述固定点和所述3个定位点之间的相对关系；</td></tr><tr><td class="content" id="description_33">构建第二坐标系，所述第二坐标系用于显示在虚拟环境中所述三维模拟图像及所述3个特征点的相对关系；</td></tr><tr><td class="content" id="description_34">根据所述第一坐标系和所述第二坐标系的坐标转换关系，将所述3个定位点转换至所述第二坐标系；</td></tr><tr><td class="content" id="description_35">将所述固定点放置于所述坐标系中，包括：根据所述坐标转换关系将所述固定点转换至所述第二坐标系。</td></tr><tr><td class="content" id="description_36">较佳地，所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合的最优情况为：所述第二平面内的所述3个定位点与所述第一平面内的对应的特征点的距离之和取最小值。</td></tr><tr><td class="content" id="description_37">较佳地，所述固定定位装置包括：定位支架和第一光学动态追踪设备，所述定位支架上设有可被所述第一光学动态追踪设备实时追踪的定位球；</td></tr><tr><td class="content" id="description_38">固定定位装置固定于所述手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至所述处理器，包括：</td></tr><tr><td class="content" id="description_39">所述定位支架固定于所述手术对象上；</td></tr><tr><td class="content" id="description_40">所述第一光学动态追踪设备通过定位球对所述定位支架的固定点进行定位，并将所述固定点的位置信息通过通信连接发送至所述处理器。</td></tr><tr><td class="content" id="description_41">较佳地，所述移动定位装置包括：探针和第二光学动态追踪设备，所述探针上设有可被所述第二光学动态追踪设备实时追踪的定位球：</td></tr><tr><td class="content" id="description_42">所述移动定位装置在所述手术对象的指定区域内获取3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器，包括：</td></tr><tr><td class="content" id="description_43">所述探针在所述指定区域内获取3个定位点；</td></tr><tr><td class="content" id="description_44">所述第二光学动态追踪设备通过定位球对所述3个定位点进行定位，并将所述个定位点的位置信息通过通信连接发送至所述处理器。</td></tr><tr><td class="content" id="description_45">在符合本领域常识的基础上，上述各优选条件，可任意组合，即得本发明各较佳实例。</td></tr><tr><td class="content" id="description_46">本发明的积极进步效果在于：本发明的配准系统及方法通过扫描装置获取手术对象的三维模拟图像，利用定位点与特征点之间的拟合关系，将固定点映射到三维模拟图像中，，从而实现手术对象与三维模拟图像的配准，为医生提供了直观的手术导航图像，提高手术的手术精准度和安全性，缩短手术时间，大幅减少了手术的操作难度，降低了对医生经验的高度依赖性，并且，值得一提的是，在术中时，无需拍摄X线光片，最大限度的保护保护医生的患者的健康。</td></tr><tr><td class="content" id="description_47">附图说明</td></tr><tr><td class="content" id="description_48">图1为本发明实施例1的用于手术导航的配准系统的系统框图。</td></tr><tr><td class="content" id="description_49">图2为本发明实施例1的用于手术导航的配准方法的流程图。</td></tr><tr><td class="content" id="description_50">图3为本发明实施例2的用于手术导航的配准方法的流程图。</td></tr><tr><td class="content" id="description_51">具体实施方式</td></tr><tr><td class="content" id="description_52">下面通过实施例的方式进一步说明本发明，但并不因此将本发明限制在所述的实施例范围之中。</td></tr><tr><td class="content" id="description_53">实施例1</td></tr><tr><td class="content" id="description_54">一种用于手术导航的配准系统，如图1所示，包括：处理器101、固定定位装置102和移动定位装置103。其中，所述固定定位装置102和所述移动定位装置103分别与所述处理器101通信连接。所述通信连接可以为有线通信连接或者无线通信连接。有线通信连接通常为装置之间通过数据线等有线的方式连接并双向或单向地传输数据，无线通信连接通常为装置之间通过Wi-Fi、4G移动通信网络、蓝牙等无线的方式连接并双向或单向地传输数据。</td></tr><tr><td class="content" id="description_55">所述固定定位装置102用于固定于手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至所述处理器101。其中，所述手术对象可以为患者全身或者患者的局部身体，具体需根据手术的实际类型确定，例如在骨科手术中，手术对象为患者的骨骼(如头骨、脊骨)；所述固定定位装置102的固定部位通常由医生根据手术需求自行确定，如可将其固定于需要手术的部位或者靠近需要手术的部位。</td></tr><tr><td class="content" id="description_56">本实施例中，所述固定定位装置102具体包括：定位支架和第一光学动态追踪设备。所述定位支架上设有可被所述第一光学动态追踪设备实时追踪的定位球。在手术过程中，医生可将所述定位支架固定于所述手术对象上(需保证所述手术对象和所述定位支架均位于所述第一光学动态追踪设备的有效追踪范围内)，所述第一光学动态追踪设备通过所述定位球对所述定位支架的固定点进行定位，并将所述固定点的位置信息通过通信连接发送至所述处理器101。</td></tr><tr><td class="content" id="description_57">所述处理器101用于在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息。其中，所述三维模拟图像可以预存于所述处理器中，具体可由扫描装置，如CT(电子计算机断层扫描)设备或是其它具有扫描功能的设备，通过对所述手术对象扫描而得；所述三维模拟图像需与实际的手术对象成一比一的比例，医生透过所述三维模拟图像可以清楚观察所述手术对象的具体形态，例如骨骼、肌肉、重要血管等；所述预设区域通常是由医生决定的，当然在特殊情况下(如处理器101中设有某些特定程序)，所述处理器101也有可能自行决定预设区域的范围。</td></tr><tr><td class="content" id="description_58">所述移动定位装置103用于在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器101。</td></tr><tr><td class="content" id="description_59">本实施例中，所述移动定位装置103具体包括：探针和第二光学动态追踪设备。所述探针上设有可被所述第二光学动态追踪设备实时追踪的定位球。在手术过程中，医生可将所述探针在所述手术对象上点选3次以获取对应于所述3个特征点的3个定位点(需保证所述手术对象和所述探针均位于所述第二光学动态追踪设备的有效追踪范围内)，点选3个定位点的顺序应对应于选取3个特征点的顺序，即在选取特征点时按照A——B——C的顺序选取，那么点选定位点时应按照对应于A的A’——对应于B的B’——对应于C的C’的顺序点选，所述第二光学动态追踪设备通过所述定位球对所述探针的点选位置即所述多个定位点进行定位，并将所述多个定位点的位置信息通过通信连接发送至所述处理器101。</td></tr><tr><td class="content" id="description_60">为了减少设备数量和节省成本，所述第一光学动态追踪设备和所述第二光学动态追踪设备可以采用一个光学动态追踪设备实现，由该一个光学动态追踪设备同时追踪定位支架的定位球和探针的定位球的位置信息。当然，若是受限于设备性能，一个光学动态追踪设备不能同时追踪两个定位球的位置信息，所述第一光学动态追踪设备和所述第二光学动态追踪设备亦可采用互不关联的两个设备。另外，本实施例之所以采用光学动态追踪设备追踪定位球，是因为光学动态追踪设备具有定位准确、追踪速度快的优点，当然在本发明的具体实施时还可采用其它原理的动态追踪设备追踪定位球。</td></tr><tr><td class="content" id="description_61">所述处理器101还用于将所述三维模拟图像和所述3个定位点放置于同一坐标系中。所述同一坐标系可以为所述三维模拟图像所在的坐标系，或者不同于所述三维模拟图像所在的坐标系的其它坐标系。</td></tr><tr><td class="content" id="description_62">所述处理器101还用于计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面，计算所述第一平面的第一法线和所述第二平面的第二法线，移动所述第二法线以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度，以及，将所述固定点放置于所述坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。通过所述虚拟映射点，医生就可以清楚地知道定位支架的所在位置，进而确定需要的手术部位。</td></tr><tr><td class="content" id="description_63">其中，第一法线和第二法线为法向量，具有方向，可以通过计算公式确定，还是以选取特征点为A、B和C，点选的定位点为对应于A的A’、对应于B的B’和对应于C的C’为例：第一平面的法向量(即第一法线)＝向量AB×向量AC，即两个向量的叉积；第二平面的法向量(即第二法线)＝向量A’B’×向量A’C’，即两个向量的叉积。</td></tr><tr><td class="content" id="description_64">移动所述第二法线以使得所述第二法线与所述第一法线重合，可以包括：移动第二法线的位置以及旋转第二法线的方向。</td></tr><tr><td class="content" id="description_65">所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合的最优情况为：所述第二平面内的所述3个定位点与所述第一平面内的对应的特征点的距离之和取最小值。即，A与A’的距离+B与B’的距离+C与C’的距离的结果取最小值。</td></tr><tr><td class="content" id="description_66">概括的说，所述光学动态追踪设备可以获得定位球的位置信息，所述手术对象上固定有安装了定位球的定位支架，因此，所述光学动态追踪设备通过定位球而已间接获得所述手术对象的位置信息。所述手术对象的三维模拟图像和探针的模拟图像已经存储的在处理器中，通过上述的定位配准系统获得拟合矩阵，使得所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同，即实际环境中所述定位支架与所述手术对象的相对位置关系，和在虚拟环境中所述手术对象的三维模拟图像与所述定位支架的模拟图像的相对位置关系是相同的，从而实现手术对象与其三维模拟图像的实时配准。手术对象发生运动时，可以在虚拟环境中同步体现。医生在使用安装有定位器的手术器械进行定位时，由于该手术器械能够被光学动态追踪设备追踪定位，因此，在显示界面上可以观察到手术器械与手术患者的相对姿位。本实施例在手术导航中为医生提供了直观的手术导航图像，提高手术的手术精准度和安全性，缩短手术时间，大幅减少了手术的操作难度，降低了对医生经验的高度依赖性，并且，值得一提的是，在术中时，无需拍摄X线光片，最大限度的保护保护医生的患者的健康。</td></tr><tr><td class="content" id="description_67">本实施例的一种用于手术导航的配准方法，利用本实施例的配准系统实现，如图2所示，所述配准方法包括：</td></tr><tr><td class="content" id="description_68">步骤201、固定定位装置固定于手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至处理器。具体地，包括所述定位支架固定于所述手术对象上；所述第一光学动态追踪设备通过定位球对所述定位支架的固定点进行定位，并将所述固定点的位置信息通过通信连接发送至所述处理器。</td></tr><tr><td class="content" id="description_69">步骤202、所述处理器在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息。</td></tr><tr><td class="content" id="description_70">步骤203、移动定位装置在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器。具体地，包括所述探针在所述手术对象上点选多次以获取对应于所述3个特征点的3个定位点；所述第二光学动态追踪设备通过定位球对所述探针的点选位置即所述3个定位点进行定位，并将所述3个定位点的位置信息通过通信连接发送至所述处理器。</td></tr><tr><td class="content" id="description_71">步骤204、所述处理器将所述三维模拟图像和所述3个定位点放置于同一坐标系中。</td></tr><tr><td class="content" id="description_72">步骤205、所述处理器计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面。</td></tr><tr><td class="content" id="description_73">步骤206、所述处理器计算所述第一平面的第一法线和所述第二平面的第二法线。其中，第一法线和第二法线为法向量，具有方向，可以通过计算公式确定，以选取特征点为A、B和C，点选的定位点为对应于A的A’、对应于B的B’和对应于C的C’为例：第一平面的法向量(即第一法线)＝向量AB×向量AC，即两个向量的叉积；第二平面的法向量(即第二法线)＝向量A’B’×向量A’C’，即两个向量的叉积。</td></tr><tr><td class="content" id="description_74">步骤207、所述处理器移动所述第二法线以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度。其中，移动所述第二法线以使得所述第二法线与所述第一法线重合，可以包括：移动第二法线的位置以及旋转第二法线的方向；所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合的最优情况为：所述第二平面内的所述3个定位点与所述第一平面内的对应的特征点的距离之和取最小值。即，A与A’的距离+B与B’的距离+C与C’的距离的结果取最小值。</td></tr><tr><td class="content" id="description_75">步骤208、所述处理器将所述固定点放置于所述坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。</td></tr><tr><td class="content" id="description_76">实施例2</td></tr><tr><td class="content" id="description_77">本实施例的配准系统与实施例1中的配准系统基本相同，不同之处在与于，本实施例的配准系统中，所述处理器101具体将所述三维模拟图像和所述3个定位点共同放置于所述三维模拟图像所在的坐标系。具体放置的过程如下：</td></tr><tr><td class="content" id="description_78">所述处理器101首先构建第一坐标系，所述第一坐标系用于显示在现实环境中所述固定点和所述3个定位点之间的相对关系；</td></tr><tr><td class="content" id="description_79">然后，构建第二坐标系，所述第二坐标系用于显示在虚拟环境中所述三维模拟图像、所述预设区域及所述3个特征点的相对关系；</td></tr><tr><td class="content" id="description_80">最后，根据所述第一坐标系和所述第二坐标系的坐标转换关系，将所述固定点和所述3个定位点转换至所述第二坐标系。</td></tr><tr><td class="content" id="description_81">本实施例的配准方法，利用本实施例的配准系统实现，如图3所示，所述配准方法包括：</td></tr><tr><td class="content" id="description_82">步骤201、固定定位装置固定于手术对象上并获取固定点的位置信息，以及将所述固定点的位置信息发送至处理器。</td></tr><tr><td class="content" id="description_83">步骤202、所述处理器在所述手术对象的三维模拟图像中选取3个特征点并采集所述3个特征点的位置信息。</td></tr><tr><td class="content" id="description_84">步骤203、移动定位装置在所述手术对象上对应于所述3个特征点选取3个定位点，获取所述3个定位点的位置信息并将所述3个定位点的位置信息发送至所述处理器。</td></tr><tr><td class="content" id="description_85">步骤2041’、所述处理器构建第一坐标系，所述第一坐标系用于显示在现实环境中所述固定点和所述3个定位点之间的相对关系。</td></tr><tr><td class="content" id="description_86">步骤2042’、所述处理器构建第二坐标系，所述第二坐标系用于显示在虚拟环境中所述三维模拟图像及所述3个特征点的相对关系。</td></tr><tr><td class="content" id="description_87">步骤2043’、所述处理器根据所述第一坐标系和所述第二坐标系的坐标转换关系，将所述3个定位点转换至所述第二坐标系。</td></tr><tr><td class="content" id="description_88">步骤205、所述处理器计算所述3个特征点所在的第一平面和所述3个定位点所在的第二平面。</td></tr><tr><td class="content" id="description_89">步骤206、所述处理器计算所述第一平面的第一法线和所述第二平面的第二法线。</td></tr><tr><td class="content" id="description_90">步骤207、所述处理器移动所述第二法线，以使得所述第二法线与所述第一法线重合，将所述第二平面以所述第二法线为中心轴旋转以使得所述第二平面内的所述3个定位点与所述第一平面内的所述3个特征点拟合，并记录所述第二法线的移动路径和所述第二平面以所述第二法线为中心轴的旋转角度。</td></tr><tr><td class="content" id="description_91">步骤208’、所述处理器根据所述坐标转换关系将所述固定点转换至所述第二坐标系中并使所述固定点沿着所述移动路径移动并以所述第二法线为中心轴旋转所述旋转角度，以获得所述固定点在所述三维模拟图像中的虚拟映射点，所述虚拟映射点和所述三维模拟图像的相对位置与所述固定点和所述手术对象的相对位置相同。</td></tr><tr><td class="content" id="description_92">虽然以上描述了本发明的具体实施方式，但是本领域的技术人员应当理解，这些仅是举例说明，本发明的保护范围是由所附权利要求书限定的。本领域的技术人员在不背离本发明的原理和实质的前提下，可以对这些实施方式做出多种变更或修改，但这些变更和修改均落入本发明的保护范围。</td></tr></table></div></body></html>